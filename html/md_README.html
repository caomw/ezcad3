<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>EZCAD: EZCAD3: Easy (Mechanical) Computer Aided Design -- Version 3</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EZCAD
   &#160;<span id="projectnumber">3</span>
   </div>
   <div id="projectbrief">Easy Computer Aided Design</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespaceEZCAD3.html" title="More details.">EZCAD3</a>: Easy (Mechanical) Computer Aided Design -- Version 3 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p>EZCAD stands for Easy Computed Aided Design. EZCAD is a mechanical CAD (Computer Aided Design) system with an integrated mechanical CAM (Computer Aided Manufacture) system. The CAD system specifies the geometry of individual parts and how they are assembled together. The CAM system specifies the manufacturing steps required to make a part.</p>
<p>In EZCAD, the designer writes a program using the (Python)[<a href="http://www.python.org/">http://www.python.org/</a>] programming language. The python program is then executed to generate both the design visualization and all associated manufacturing files (e.g. .stl files for 3-printers, G-codes for CNC mills/lathes, .dxf files for laser printers, etc.) EZCAD does not include either a text editor or a visualization tool. Instead, the designer uses their preferred text editor (e.g. idle, emacs, vim, etc.) and they use their own preferred visualization tools (e.g. meshlab, etc.) Other tools are used to visualize generated manufacturing files.</p>
<p>In short, EZCAD is just a Python library that is executed to generate the various design files.</p>
<h1>Downloading</h1>
<p>This package is distributed in source form from a <em>git</em> repository. To get a copy: </p>
<pre class="fragment">    git clone https://github.com/waynegramlich/ezcad3.git
</pre><p>In addition, this package needs a version of (OpenSCAD)[<a href="http://www.openscad.org/">http://www.openscad.org/</a>]. For those who use Linux distributions based on the Debian package system (e.g. Ubuntu, Mint, etc.), the following will do the trick: </p>
<pre class="fragment">    sudo apt-get install openscad
</pre><p>OpenSCAD is primarily used as a front-end to the wonderful (CGAL)[<a href="http://www.cgal.org/">http://www.cgal.org/</a>] (Computational Geometry Algorithms Library). In particular, OpenSCAD uses the Boolean 3D solids library embodied in the NEF3 sub-library of CGAL.</p>
<p>Detailed documentation of the Python classes and associated methods is maintained by (Doxygen)[<a href="http://www.doxygen.org/">http://www.doxygen.org/</a>]. For convenience, all of the generated Doxygen documenation is checked into the repository. If you want to generated Doxygen documentation locally, you need to download the program. I downloaded my copy via: </p>
<pre class="fragment">    sudo apt-get install doxygen
</pre><h1>Documentation</h1>
<p>In addition to this document, there is (Doxygen generated documentation)[html/pages.html].</p>
<h1>Licensing</h1>
<p>In general, I really like Open Source Licenses. I have a slight preference of the GPL open source license, so that is what <a class="el" href="namespaceEZCAD3.html" title="More details.">EZCAD3</a> is released under. I emulate the (Free Software Foundation)[<a href="http://www.fsf.org">http://www.fsf.org</a>] that any code contributed to my code branch requires a copyright assignment. Professor Eben Moglen has written up a short explanation of (Why the FSF gets copyright assignments from contributors)[<a href="http://www.gnu.org/licenses/why-assign.html">http://www.gnu.org/licenses/why-assign.html</a>]. I strongly feel that having a unified copyright owner provides maximum protection for the open source software. While it is possible to get (overly legalistic)[<a href="http://ftp.xemacs.org/old-beta/FSF/assign.changes">http://ftp.xemacs.org/old-beta/FSF/assign.changes</a>], I think the following is more that adequate to assign the copyright: </p>
<pre class="fragment">    Hello:

    I am assigning my modifications to EZCAD to
    Wayne C. Gramlich with the requirement that the code
    will continue to be released under the GPL version 3
    license or higher.

    Regards,

    {Your name here}
</pre><p>Enough on this legal stuff!</p>
<h1>Quick Overview</h1>
<p>In EZCAD, the most important Python class is the <em>Part</em> class. The <em>Part</em> class is used to both manufacture individual parts <em>and</em> to assemble the individual parts together into sub-assemblies.</p>
<p>In addition to the <em>Part</em> class there are bunch of utility classes. In alphabetical order, the utility classes are:</p>
<ul>
<li><em>Angle</em> is used to represent angles.</li>
</ul>
<ul>
<li><em>Color</em> is used to represent a represent the color that an individual part is rendered as.</li>
</ul>
<ul>
<li><em>L</em> is used to represent a length (e.g. mm, cm, inch, ft, etc.) (This type is shortened to "L" because is used so much.)</li>
</ul>
<ul>
<li><em>Material</em> specifies what material a part is manufactured out of.</li>
</ul>
<ul>
<li><em>P</em> is used to represent a point in a 3-dimensional Cartesian coordinate system. (This type is shortened to "P" because is used so much.)</li>
</ul>
<ul>
<li><em>Place</em> is used to represent a <em>Part</em> placement in a sub-assembly.</li>
</ul>
<p>Each EZCAD class method will validates that its arguments types are correct. (If you have ever heard of the "duck typing" design pattern, EZCAD most definitely does <b>not</b> use that particular programming religion.)</p>
<p>The CAM (Computer Aided Manufacture) portion is based on the following classes:</p>
<ul>
<li><em>EZCAD</em> is the global object that orchestrates the entire process.</li>
</ul>
<ul>
<li><em>Shop</em> is the parent class that specifies all the available machines and associated machine tooling.</li>
</ul>
<ul>
<li><em>Machine</em> is a specific machine such as a 3D-printer, laser-cutter, mill, lathe, drill press, etc.</li>
</ul>
<ul>
<li><em>Tool</em> is a specific tool that can be loaded into a machine. These include drill bits, end-mills, etc.</li>
</ul>
<p>The shop is specified independently from the part and sub-assembly file. The same part will generate different manufacturing files depending upon what machines and tooling is available in a given shop. Thus, different G-codes, .dxf files are generated depending upon what is available in the shop.</p>
<p>EZCAD operates in three distinct phases:</p>
<ul>
<li>Part Initialization. This phase creates a hierarchical name space of parts and sub-assemblies.</li>
</ul>
<ul>
<li>Constraint Propagation. This phase propagates dimensional changes around the overall design. This process also keeps track of the bounding box around each individual part and sub-assembly.</li>
</ul>
<ul>
<li>Manufacture and Assembly. This phase generates the required manufacturing files needed for construct the various parts. This phase also specifies where <em>Part</em>'s are placed in each sub-assembly.</li>
</ul>
<p>Each phase is quickly discussed below:</p>
<h2>Part Initialization Phase</h2>
<p>Each user individual part is implemented as a Python class object that sub-classes the <em>Part</em> super class. As expected, the initialization phase occurs in the *__init__*() method. Each part has an up-level parent (abbreviated as "*up*"). The following code fragment shows how it is done: </p>
<pre class="fragment">    class My_Part(Part):

        def __init__(self, up):
            Part.__init__(self, up)      # Initialize *Part* super-class
            self.part1_ = Part1(self)    # Initialize *Part1*
            # ...
            self.partN_ = PartN(self)    # Initialize *PartN*
</pre><p>The first line initializes the <em>Part</em> super class with <em>up</em> as the up-level parent. The second and subsequent lines initializes the various sub-parts. By convention, each sub-*Part* is stored into <em>self</em> with a trailing "_" suffix. (There will be more about suffixes shortly.)</p>
<p>After initialization is complete, each <em>Part</em> can access any other <em>Part</em> in the design using standard dot (".") notation. For example, <em>self.up.base_</em> will access the <em>base_</em> <em>Part</em> of the parent to <em>self</em>.</p>
<p>Due to the nature of Python, the designer will be storing dimensional values into <em>Part</em> member variables. EZCAD uses member variable suffixes to prevent accidental name clashes. Designers are constrained to use a suffixes listed below:</p>
<ul>
<li>"_": <em>Part</em></li>
<li>"_a": <em>Angle</em></li>
<li>"_c": <em>Color*p</em></li>
<li><em>"_i": *int</em> (i.e. an integer number)</li>
<li>"_f": <em>float</em> (i.e. a floating point number)</li>
<li>"_l": <em>L</em> (i.e. a length)</li>
<li>"_m": <em>Material</em></li>
<li>"_o": Some other type</li>
<li>"_s": <em>str</em> (i.e. string)</li>
<li>"_p": <em>P</em> (i.e. a point)</li>
<li>"_pl": <em>Place</em></li>
</ul>
<p>All user defined member variables <em>must</em> end with one of the suffixes above.</p>
<h2>Constraint Propagation Phase</h2>
<p>Constraint propagation is what allows the designer to relatively easily resize a design. The constraint propagation phase occurs in a <em>Part</em>'s <em>construct</em>() method. Constraint propagation occurs by repeatably calling the <em>construct</em>() method for each <em>Part</em> in the entire design. The <em>construct</em>() methods are repeatably called until none of the values with approved suffixes (e.g. "_l", "_p") change any more.</p>
<p>To further support constraint propagation, each <em>Part</em> maintains a bounding box for everything it contains. The designer can easily access the various bounding box values using short concise member variable names. Along the X direction, the two bounding box values are referred as east ("e") and west ("w"). For the Y direction, north ("n") and south ("s") are used. For the Z direction, top ("t") and bottom ("b") are used. The bounding box results in 12 length (i.e. <em>L</em>) member variables and 27 point (i.e. <em>P</em>) member variables as listed below:</p>
<ul>
<li><em>ex</em>: East X length</li>
<li><em>cx</em>: Center X length</li>
<li><em>wx</em>: West X length</li>
<li><em>dx</em>: Delta X length (i.e. <em>ex</em> - <em>wx</em>)</li>
<li><em>ny</em>: North Y length</li>
<li><em>cy</em>: Center Y length</li>
<li><em>sy</em>: South Y length</li>
<li><em>dy</em>: Delta Y length (i.e <em>ny</em> - <em>sy</em>)</li>
<li><em>tz</em>: Top Z length</li>
<li><em>cz</em>: Center Z length</li>
<li><em>bz</em>: Bottom Z length</li>
<li><em>dz</em>: Delta Z length (i.e. <em>tz</em> - <em>bz</em>)</li>
<li><em>tne</em>: Top/North/East point (i.e. P(ex, ny, tz))</li>
<li><em>tn</em>: Top/North point (i.e. P(cx, ny, tz))</li>
<li><em>tnw</em>: Top/North/West point (i.e. P(wx, ny, tz))</li>
<li><em>te</em>: Top/East point (i.e. P(ex, cy, cz))</li>
<li><em>t</em>: Top point (i.e. P(cx, cy, tz))</li>
<li><em>tw</em>: Top/West point (i.e. P(wx, cy, tz))</li>
<li><em>tse</em>: Top/South/East point (i.e. P(ex, sy, tz))</li>
<li><em>ts</em>: Top/South/East point (i.e. P(cx, sy, tz))</li>
<li><em>tsw</em>: Top/South/East point (i.e. P(wx, sy, tz))</li>
<li><em>ne</em>: North/East point (i.e. P(ex, ny, cz))</li>
<li><em>n</em>: North point (i.e. P(cx, ny, cz))</li>
<li><em>nw</em>: North/West point (i.e. P(wx, ny, cz))</li>
<li><em>e</em>: East point (i.e. P(ex, cy, cz))</li>
<li><em>c</em>: Center point (i.e. P(cx, cy, cz))</li>
<li><em>w</em>: West point (i.e. P(wx, cy, cz))</li>
<li><em>se</em>: North/East point (i.e. P(ex, sy, cz))</li>
<li><em>s</em>: North/East point (i.e. P(cx, sy, cz))</li>
<li><em>sw</em>: North/East point (i.e. P(wx, sy, cz))</li>
<li><em>bne</em>: Bottom/North/East point (i.e. P(ex, ny, bz))</li>
<li><em>bn</em>: Bottom/North point (i.e. P(cx, ny, bz))</li>
<li><em>bnw</em>: Bottom/North/West point (i.e. P(wx, ny, bz))</li>
<li><em>be</em>: Bottom/East point (i.e. P(ex, cy, bz))</li>
<li><em>b</em>: South point (i.e. P(cx, cy, bz))</li>
<li><em>bw</em>: Bottom/West point (i.e. P(wx, cy, bz))</li>
<li><em>bse</em>: Bottom/South/East point (i.e. P(ex, sy, bz))</li>
<li><em>bs</em>: Bottom/South/East point (i.e. P(cx, sy, bz))</li>
<li><em>bsw</em>: Bottom/South/East point (i.e. P(wx, sy, bz))</li>
</ul>
<p>{Talk about design in assembly space vs individual parts.}</p>
<p>{Short example of constraint propagation goes here.}</p>
<h2>Manufacture and Assembly Phase</h2>
<p>The manufacturing and assembly phase occurs last.</p>
<p>{More goes here...}</p>
<h1>A Quick Example</h1>
<p>The example below creates a plastic box with a cover, where the cover has a lip that keeps the cover centered over the box. We present the entire code body first then will describe what is happening on a chunk by chunk basis next: </p>
<pre class="fragment">    #!/usr/bin/env python

    import EZCAD3   # The EZCAD (revision 3) classes:

    class Simple_Box(Part):

        def __init__(self, up, dx=L(mm=100.0), dy=L(mm=50.0),
          dz=L(25.0), wall_thickness=L(mm=10.0),
          material=Material("plastic", "ABS")):
            # Initialize the *Part*:
            Part.__init__(self, up)

            # Remember the initialization values:
            self.dx_l = dx
            self.dy_l = dy
            self.dz_l = dz
            self.wall_thickness_l_ = wall_thickness
            self.material_m = material

            # Instantiate the sub-*Part*'s:
            self.base_ = Simple_Box_Base(self)
            self.cover_ = Simple_Box_Cover(self)

        def construct(self):
            pass

    class Simple_Box_Base(Part):

        def __init__(self, up, place = True):
            Part.__init__(self, up, place)

        def construct(self):
            # Grab some values from *self*:
            box = self.up
            dx = box.dx_l
            dy = box.dy_l
            dz = box.dz_l
            thickness = box.wall_thickness
            material = box.material_m

            # Add another 
            self.height_l = height = dz - thickness
            zero = L()

            # Start with a solid block of the right dimensions:
            height = dz - wall_thickness
            self.block(comment = "Initial block of material",
              material = material,
              color = Color("blue"),
              corner1 = P(-dx/2, -dy/2, zero),
              corner2 = P( dx/2,  dy/2, height))

            # Pocket out the body of the box:
            self.simple_pocket(comment = "Box Pocket",
              corner1 = box.bsw + P(thickness, thickness, thickness),
              corner2 = box.tne - P(thickness, thickness, zero))

    class Simple_Box_Cover(Part):

        def __init__(self, up, place = True):
            Part.__init__(self, up, place)

        def construct(self):
            # Grab some values from *parent* and *base*:
            box = self.up
            dx = box.dx_l
            dy = box.dy_l
            dz = box.dz_l
            material = box.material_m
            thickness = box.wall_thickness_l
            base = box.base_
            base_height = base.height_l

            # Compute local values:
            self.lip_thickness = lip_thickness = thickness/2

            # Do the top part of the cover:
            self.block(comment = "Cover Top",
              material = material
              color = Color("green"),
              corner1 = base.tsw
              corner2 = base.tne + Point(z = thickness))

            # Do the lip part of the cover:
            self.block(comment = "Cover Lip",
              corner1 = base.tsw + P(thickness, thickness, -lip_thickness),
              corner2 = base.tne + Point(-thickness, -thickness, zero))

    ezcad = EZCAD3(0)                # Using EZCAD 3.0
    my_assembly = My_Assembly(None)  # Initialize top-level sub-assembly
    my_assembly.process(ezcad)       # Process the design
</pre><h2>Final Stuff</h2>
<p>The final step is: </p>
<pre class="fragment">    ezcad = EZCAD3(0)                # Using EZCAD 3.0
    my_assembly = My_Assembly(None)  # Initialize top-level sub-assembly
    my_assembly.process(ezcad)       # Process the design
</pre><p>In this code sequence, an <em><a class="el" href="namespaceEZCAD3.html" title="More details.">EZCAD3</a></em> object is allocated and initialized. The major revision number is 3 and the minor revision number is 0. Next, the top-level sub-assembly is allocated and initialized. Finally, the <em>process</em>() method is invoked to cause the design to be processed. For those of you who like to scrunch everything onto one line: </p>
<pre class="fragment">    My_Assembly(None).process(EZCAD3(0))
</pre><p>will also do the trick. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 9 2013 17:12:26 for EZCAD by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
